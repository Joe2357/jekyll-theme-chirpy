---
title: "MPBond: Efficient Network-level Collaboration Among Personal Mobile Devices"
categories: [IMES, paper]
tags: [IMES, paper]
modify_date: 2021-02-09 18:43 +0900
---

> 2021 / 2 / 17 IMES 세미나

## Abstract

- MPBond : 여러 개인 mobile device가 <u>공동으로 internet에서 content를 가져올 수 있도록</u> 하는 효율적인 system
  - 스마트워치 : data downloading을 통해 페어링된 스마트폰 지원
  - MPTCP ( Multipath TCP ) 에 영감을 받음
    - <i>distribute multipath transport</i> 개념 적용 ( 여러 subflow들이 다른 device로 traverse할 수 있음 )
  - 개발
    - cross-device 연결 관리 scheme
    - buffering 전략
    - packet scheduling 알고리즘
    - MPBond architecture에 기반한 policy framework
  - 범용 mobile device에 MPBond를 구현하고 있음
  - 다양한 network 조건에서 다른 workload를 이용한 <u>실제 평가</u>
    - MPBond의 효율성 증명
    - 최신 협업 framework와의 비교
      - file download time : 5% -> 46% 단축
      - video streaming bitrate : 2% -> 118% 향상
      - energy efficiency : 10% -> 57% 개선

## Introduction

- user가 여러 개의 mobile device를 가지고 있는 것이 일반적

  - 스마트워치 : <u>스마트폰과 페어링되어야 함</u>
    - 대부분 2개의 휴대전화 ( 업무용, 개인용 ) 사용

- 스마트 mobile device : 여러 network interface 포함

  - **원격 internet 서버, local device 등과 통신 가능**

  - 핵심 : 협업적으로 작동할 수 있는 device network interface의 <u>잠재력은 완전히 이용되기 힘듬</u>

  - mobile device <i>ecosystem</i>에 **networking software 혁신** 도입

    - **MPBond** 개발 : <u>여러 개인 mobile devices들이 공동으로 internet에서 content를 가져올 수 있는</u> 전체론적 system

      - 오늘날 mobile/wearable OS가 지원하지 못하는 것들을 가능하게 함

        1. 스마트워치 : cellular를 통해 data를 download하여, 페어링된 스마트폰 지원

          - 현재 많은 COTS 스마트워치는 cellular에 직접 access 가능
          - 단일 device를 사용하는 것보다 더 좋은 throughput 제공

        2. 공공장소에서의 WiFi network : 각 interface마다 rate에 제한 부과

          - 각 device마다 WiFi interface가 있으므로, <i>multi-device collaboration</i>으로 극복 가능

        3. 2개의 스마트폰이 LTE bandwidth를 공유할 수 있음

          - cellular interface가 MPBond에 의해 **결합**되어지고, 하나의 가상 interface로 사용됨

        4. Wearable : 신호가 좋은 지점에 배치하여 WiFi/LTE **range extenders** 역할 수행 가능

          - 스마트폰 : 배터리가 부족한 경우 에너지 효율적인 BT link를 통해 페어링된 스마트워치로 power-hungry LTE access를 offload할 수 있음

      - 위의 사용 사례들 : user data가 여러 subflow들에 분산되는 <u>multipath transport scheme</u>에서 **실현될 수 있음**

- MPBond : subflow가 서로 다른 device들을 통과하는 distribute multipath를 지원해야함 ( 기존의 multipath paradigm (MPTCP) 과 다름 )

  - client app이 실행되는 **primary device** / primary의 network 성능을 향상시키는 여러 **helper devices**로 구성
  - primary에서의 traffic : MPBond service에 의해 인터셉트
    - local wireless link ( pipe ) 를 통해 helper들에게 traffic을 distribute
      - helper : 각각 자신의 cellular interface를 통해 remote server로 traffic 전달
    - 나머지는 primary의 cellular interface를 통해 전송
  - 역방향 link ( downlink ) : 유사하게 작동
    - server 또는 MPBond capable proxy : content를 primary와 helper들에게 distribute
  - primary : 받은 모든 part를 merge -> client app으로 content 전달

- MPBond scheme : <u>많은 challenge</u>를 안고 있음

  - 다른 기종들과 local wireless link를 적절히 관리하는 방법?
  - helper device를 전략적으로 활용하여 network 성능을 향상시키는 방법?
  - MPBond에 고유한 remote path와 local pipe를 모두 고려하는 강력한 multipath scheduler를 설계하는 방법?
  - user와 app에게 적절한 interface를 보이는 방법?
  - client와 server app에 대해 전체 MPBond system을 명료하게 만드는 방법?

- 주요 design

  - MPBond : distribute multipath transport 프레임워크
    - subflow가 helper를 traverse하고 helper들이 pipe를 통해 primary device와 data를 교환할 수 있도록 함
    - 다양한 wireless 기술을 이용하여 pipe를 유연하게 관리하는 scheme 개발
    - MPTCP의 control plane protocol 확장 -> primary와 helper 조정
      - distribute multipath와 pipe를 지원하기 위함
  - MPBond : 모든 subflow를 2개의 TCP flow로 분할
    - 분할된 결과
      - primary와 helper 사이의 flow
      - helper와 server 사이의 flow
    - TCP 분할 : MPBond ( internet과 pipe ) 의 경우에는 이기종 network에 걸친 end-to-end TCP session에 이득
      - flow를 분할하기 전에 buffer를 설정할 수 있음 : network 상에서의 변동에 의한 부정적 성능 영향을 효과적으로 완화
      - 신기술은 아님 : **한 단계 더 발전시킴**
        - mobile multipath 전송의 맥락에서, helper device에 적용
  - PAMS ( Pipe-Aware Multipath Scheduler ) 개발 : 여러 subflow에게 traffic을 전략적으로 distribute
    - MPBond 맞춤형으로 개조하기 위한 3가지 구성요소
      - pipe, helper측 buffering, 이기종 network를 고려한 **subflow latency 추정 module**
      - 각 packet의 전송 latency를 낮추는 현명한 scheduling 결정을 위한 **algorithm**
      - network 상태 변동, pipe를 통한 고장 가능성을 처리하는 **smart reinjection scheme**
  - MPBond : 다양한 정책을 유연하게 지정할 수 있음
    - app별 사용 권한 부여
    - 각 device resource 소비 제한
    - traffic 우선순위 지정

- 상용 mobile device에 MPBond 구현

  - app 투명성과 좋은 성능을 유지하면서 user space에서 구현할 수 있음
  - 실제 mobile network로 체계적 평가
  - 주요 평가 결과
    - 비교 대상 : kibbutz, COMBINE ( 최첨단 system )
      - 결과 : 다양한 workload, 광범위한 network 조건에서 energy 소비 10% ~ 57% 줄임
      - 다양하고 wild한 network 환경에서, file download 시간 13% ~ 35% 줄임
        - download 시간 감소 -> 적은 energy 소비
    - bandwidth가 많이 필요한 360˚ video 스트리밍을 위해 적합한 QoE 제공하기 위해서는 **3개의 협업 mobile device가 필요**
      - MPBond dual mode의 효과 입증

- MPBond : distribute multipath 개념을 적용

  - <u>개인 mobile device간 network-level 협업 혁신을 이룬</u> 효율적이고 실용적인 system
  - 다른 cross-device data sharing scheme보다 더 좋은 성능 제공
    - PAMS scheduler에 의해 향상된 성능
    - app의 투명성
    - 더 좋은 유연성
  - **wearable 기기를 고려한 첫번째 연구**
  - GitHub에 open-source로 공개되어있음

## Background and Related Work

##### Multipath Transport

- 여러 network path를 동시에 활용하여 **data 전송을 가속화**하는 기술
- MPTCP ( 사실상 multipath solution ) : socket interface와 여러 기본 TCP subflow 사이에 shim layer 제공
  - transport layer에서 작동 : app과 network 모두 <u>수정할 필요가 없음</u>
  - 가치 : 다른 path의 공동 사용에서 입증됨
    - QoE가 다양한 internet app에서 주는 이점과 비슷
- packet scheduler : multipath 전송 system에 **핵심 요소**
  - 잠재적으로 이기종 network path를 통해 설정된 서로 다른 subflow에 data를 배포
  - MinRTT : MPTCP의 기본 scheduler
    - congestion window의 가용 공간, 최소 network RTT를 이용한 path 선택
  - MPTCP 성능을 향상시키기 위한 scheduling algorithm 혁신 연구도 있음
  - multipath transport protocol : 단일 host에서 subflow 설정
    - MPTCP
    - MPRTP
    - MPQUIC
    - MP-H2
    - MP-RDMA
  - MPBond : 협업하기 위해 **subflow를 여러 mobile device를 통과하도록 distribute**

##### Multi-device Collaboration

- 기존 work : data 전달을 위한 여러 device간의 network-level 협업을 해결하기 위해 다양한 노력
  - Mobile kibbutz : tethering 기반 MPTCP 활용
    - 자신의 cellular interface를 이용하여 다른 tethering된 device의 cellular network를 통한 network data 전송
    - Android : USB 케이블 또는 wireless network를 이용하여 device P는 device C를 tethering할 수 있음
      - wireless tethering을 사용하는 경우
        - P가 WiFi AP 역할 수행 ( SoftAP mode )
        - WiFi를 통해 C로부터 traffic 수신
        - P의 LTE network를 통해 internet server로 전송 ( uplink traffic )
      - downlink 방향도 비슷하게 작동
      - C는 2개의 local interface가 있음
        - P에 연결될 WiFi interface
        - MPTCP를 적용할 수 있는 자체 LTE interface
- PRISM : heavy-weight 메커니즘
  - OS kernel에서 TCP stack을 수정, 다중 WWAN link에서 단일 TCP flow를 제거
  - custom proxy를 사용, 다른 device의 다중 WWAN 연결을 활용
- 다른 network-level 협업 solution : app 계층에서 작동, 특정 app에 중점
  - COMBINE : HTTP byte-range request 사용, wireless peer 간의 HTTP server에서 file을 공동으로 download
  - MicroCast : video streaming이 주 목표
  - Cool-Tether : web browsing traffic 전용, energy 효율적 cellular tethering 제안
- MPBond : 경량, 여러가지 이점 제공 ( 향상된 성능 등 )
  - 신중히 설계된 scheduler, app의 투명성, 더 좋은 유연성
  - MPBond 이외 연구들은 wearable에 적용되지 않음
  - network-level 협업 이외에도, 여러 mobile device 간에 다른 I/O resource를 공유하는 system 존재

## Motivation

### 1. Incentives to Carry Multiple Devices

- user가 여러 mobile device를 가지는 것이 보편화 ( 업무용 / 개인용 등 )
  - 분리하여 사용 : data의 유출이나 손상을 최소화
  - 통신사가 상호보완적 coverage 소지 => device를 바꾸면서 더 좋은 성능을 사용할 수 있음
    - 선불 요금제가 보급된 나라 ( 인도 ) 에서 인기
  - WiFi 핫스팟 용으로 이전 phone 사용
  - roaming에 편리한 sim card가 장착된 phone 사용
  - 배터리 불안 완화
  - 도난 방지
  - 여분의 저장공간 활용
  - 중요한 data 백업
- phone을 새로 사서 여분으로 사용하지는 않음
  - 기존에 사용하던 오래된 phone을 여분으로써 사용
- 스마트워치를 사용하는 것이 유행
  - sim card가 내장 : cellular network에 접근할 수 있음
  - internet access 기능을 갖춘 dual / triple mobile device 조합이 가능
    - 스마트폰 + 태블릿
    - 스마트폰 + 노트북 + 스마트워치
  - device network interface 잠재력은 완전히 이용되지 못함

### 2. Benefits of Multi-device Collaboration

- device들 간의 network-level 협업 : network 성능 크게 향상 가능
- 기본 idea
  - last-mile wireless hop이 bottleneck인 경우 : 여러 device로 동시에 download하는 것이 WWAN throughput 향상
  - 여러 device에서 수신한 content : WLAN을 통해 병합 -> app으로 전달
- WWAN측 throughput aggregation의 이점에 대해 실험적으로 입증
  - 이전의 연구에서는 거의 진행되지 않은 부분
  - 서로 다른 cellular carrier를 사용하는 3개의 COTS mobile device 고려
    - phone을 나란히 배치
    - 1분동안 자신의 LTE network를 이용하여 인근 server에서 동시 대량 download 수행
    - 200ms마다 TCP throughput 샘플링
    - 3곳에서 실험
      - 대학 사무실
      - 주택 아파트
      - 식료품 가게
  - 결과
    - 3개의 carrier가 각각 6.2Mbps ~ 61.8Mbps 범위의 중앙값 throughput으로, 3곳의 위치에서 다른 성능 보임
      - 특정 device가 특정 위치에서 더 좋은 성능을 보이지는 않음
      - app의 최소 QoE 요구를 충족 목적, live network 상태에 따라 **최적의 device를 동적으로 선택** 가능 ( MPBond가 지원 )
    - WLAN측 merging이 bottleneck이 아닌 경우
      - 2개의 interface 사용 : 15.8% -> 474.2% throughput 상승
      - 3개의 device 사용 : 63.1% -> 695.4% throughput 상승
    - aggregated throughput : bandwidth를 많이 잡아먹는 app을 효율적으로 지원
      - UHD video 스트리밍
      - mobile VR
      - mobile holographic communication

### 3. Networking Capability of Wearables

- 위의 실험 : LTE 기능이 있는 스마트워치가 포함되어있음
  - 적절한 throughput을 가지고 있음 // 그래도 network capability에 대해 스마트폰이나 태블릿 등과 비교당할 우려
  - 동일 년도에 출시한 스마트폰 vs 스마트워치를 이용하여 LTE throughput을 실험적으로 증명
    - device 기능이 성능에 미치는 영향 테스트
    - 실험 내용
      - 두 device에는 동일한 sim card ( AT&T ) 를 반복적으로 삽입
      - 동일한 위치 / LTE를 통한 10회의 연속 TCP bulk download
    - 결과
      - 스마트워치 중앙 throughput : 29.9Mbps
      - 스마트폰 중앙 throughput : 56.1Mbps
    - 예상 원인
      - 시계의 소형 form factor ( 안테나 크기 작아짐, tx/rx 전력 감소 )
  - But) 스마트워치 interface : 다른 device들이 WWAN측에서의 성능이 좋지 않은 경우, 공동 content 제공에 **상당히 기여할 수 있음**
- 잠재적 우려사항 : energy

### 4. Do Existing Network-level Collaboration Schemes Suffice?

- 기존 network-level 협업 scheme : 몇가지 한계점이 있음

##### A Lack of Flexibility

- 원하는 network-level 수준 협업 요구사항
  - 다양한 유형의 app을 지원할 수 있도록 유연해야함
  - mobile, network infrastructure에 대해 최소한의 변경을 요구
- kibbutz : app의 관점에서 tethering device는 <u>단순히 layer-3 router처럼 작동</u>
  - layer-4/5 에서 다양한 개선 및 정책을 유연하게 지원할 수 없음
  - tethering subsystem : OS/kernel과 결합 -> 수정이나 확장이 어려움
    - Android tethering은 많은 실질적 limit이 있음
      - 2개 이상의 device에 대한 tethering 지원하지 않음 -> 최대 2개의 device에서 동작
      - WiFi/Bluetooth 중 하나만의 tethering 연결이 설정될 수 있음 -> 원할한 handover 방해
      - carrier/device : tethering 기능을 잠그거나, tethering 기반 hotspot에 대해 제한된 data 요금제만을 제공
- PRISM : sender/receiver 모두에게 수정된 kerenl TCP stack, network의 custom PRISM proxy에 의존 -> **상당한 deployment overhead**
  - WLAN architecture : WiFi Ad-hoc mode에 의존
    - Android, iOS에 사용할 수 없음
- COMBINE, MicroCast, Cool-Tether 등의 다른 scheme
  - layer-5의 app을 수정해야함
  - server : network 협업을 위해 HTTP byte-range request를 지원해야함
  - 일부는 특정 유형의 app traffic 전용으로 설계됨

##### Suboptimal Performance due to Fluctuating Network Conditions

- kibbutz ( tethering 관점 )
  - end-to-end path는 2가지 segment로 구성
    - WLAN
    - WWAN ( 이쪽의 throughput은 변동이 있음 )
  - WLAN측 성능 실험
    - 가시선(LoS) / 비가시선(NLoS)에 따라 physical distance가 달라지는 경우
    - phone -> phone 으로의 data fetching에서의 WLAN throughput 측정
  - 결과
    - WLAN throughput은 크게 달라짐
      - WWAN throughput보다 낮은 경우가 많았음
    - 이기종 link 특성 + 복잡한 상호작용 => WLAN, WWAN이 매우 다른 성능 나타냄
      - dynamic한 방식으로 **bottleneck이 될 수 있음**
  - 기본 tethering 매커니즘 : 단순한 layer-2/3 forwarding
    - 위의 이질성 + dynamic을 제대로 다룰 수 없음
    - tethering에서) 유효 data rate = WWAN, WLAN bandwidth의 최솟값
      - WWAN, WLAN을 분리하는 device에서 data를 적절히 buffering한다면 높일 수 있음
  - scheduling 결정을 내릴 때) 기존 scheme : 특정 시간에서의 WWAN, WLAN 사이의 bottleneck link의 성능만을 고려
    - workload 분산 최적화 X -> multipath 성능 저하

##### Excessive Energy Consumption

- 배터리 용량이 작은 wearable device 등에서의 문제점
- tethering 방식에서 congestion control = end-to-end
  - 한쪽이 bottleneck이라면 다른 쪽의 bandwidth가 줄어듬
  - 줄어든 만큼 radio-on 시간이 늘어남 -> energy 소비 증가
- app layer에서 작동하는 해법 : HTTP byte-range request 사이에 idle network period를 두는 것

## MPBond Design

- MPBond : user가 mobile device를 공동으로 사용, app에 투명한 방식으로 internet에 접근할 수 있음
  - 1개의 primary device / 여러개의 helper device ( 다중 primary도 있는 듯 )
  - client app ( file downloader, video streaming 등 ) : primary에서만 실행됨
  - app의 TCP traffic : MPBond에 의해 투명하게 차단됨
    - primary의 자체 interface / forwarding이 있는 helper를 통해 전송되도록 schedule
  - 반대 방향 : MPBond 지원 remote server의 여러 subflow에 traffic 분산
    - content는 primary에서 합쳐짐
  - MPBond 지원 proxy 도입 : internet server로부터 **완전히 투명해지기 위해** 사용
    - 단일 path connection 설정
  - server : MPBond를 지원하는 remote server, proxy
  - MPBond : primary, helper에 OS service로써 구현
    - client측 app에서도 투명성 유지

### 1. Subflow management

- MPBond subflow의 상위개념 : MPTCP와 유사
  - 예외점
    - subflow가 다른 mobile device를 traverse
    - 수신된 part를 합치기 위해 primary와 helper가 local data를 주고받아야함
  - <i>pipe</i> : primary <-> helper 사이의 data channel
  - <i>HS-path</i> : helper <-> server 사이의 network path
  - <i>PS-path</i> : primary <-> server 사이의 network path ( helper 존재 X )
  - end-to-end subflow : PS-path 또는 HS-path + pipe를 통과
- WiFi, Bluetooth 등의 wireless 기술 사용 : 여러 pipe 동시지원
  - WLAN을 이용하여 helper를 WiFi AP 역할을 하는 primary에게 연결 or Bluetooth를 이용하여 helper를 primary에게 페어링하여 설정
  - scheduler : 동적으로 pipe를 고르거나 여러개를 사용하여 **data rate를 높이려는 목적**
    - 여러 요소를 반영하여 적합한 pipe 선택
  - pipe : 해체되거나 설정될 수 있음 ( MPTCP와 유사 )
    - user TCP 연결과 느슨하게 결합되어짐
    - data 전송에 방해 없이 pipe 간에 migration할 수 있음
- MPBond handshake 절차 : helper를 활용하는 primary <-> server 간의 subflow를 이용한 user TCP 연결을 설정 // MPTCP 방법을 따름
  - helper와 조정하기 위해 pipe를 통한 추가 control message 사용
  - HS-path + pipe가 포함된 subflow의 경우, primary : INIT\_MP\_JOIN message 전송
    - helper에게 client + server의 정보 제공
  - MP\_JOIN message : 2번째 subflow 설정
  - ACK으로 MP\_OK message 전송

##### Error Handling

- MPBond : MPTCP와 다르게, pipe failure도 처리해주어야 함
  - pipe가 고장나면 : subflow 해체, 보류중인 모든 data가 다른 subflow에 재주입
  - WWAN / WLAN link 오류로 인해 **app data가 손실되는 일은 없을 것**

### 2. Buffer Management and Helper-side Connection Split

- MPBond : 양 endpoint에 buffer 유지
  - network 변동 흡수
  - subflow의 이기종 특성 수용
- helper에도 buffer를 두었음
- MPBond의 모든 subflow는 2개의 TCP flow로 분할됨
  - primary <-> helper flow : pipe를 덮음
  - helper <-> server flow : HS-path를 덮음
- helper가 관여했다면, WWAN과 WLAN은 매우 다른 link 특성을 보임
  - TCP 분할 : TCP control loop를 줄임 => 이 상황에서의 성능 향상
  - 두 flow 사이에 **buffer를 설정할 수 있음**
    - subflow의 bottleneck 변화로 인한 부정적 성능 완화
    - $Th_{pipe}>Th_{HS}$인 경우 : helper에 buffer를 설치 => $Th_{pipe}$의 크기만큼 data 전달 가능 ( **더 빠른 data 전송** )

### 3. Pipe-aware Multipath Scheduler

- scheduler : traffic을 여러 path로 distribute하는 방법 결정
  - wireless 상황에서의 개선 연구는 많았지만, <u>MPBond 적용에는 문제점이 있음</u>
    - 대부분의 기존 mobile multipath scheduler : 2개의 path만을 다룸 ( WiFi, cellular )
      - MPBond가 처리하는 multipath로써의 확장 불가
    - 이전에는 pipe에 대한 연구가 없음
- **Pipe-aware Multipath Scheduler** ( PAMS ) 개발
  - 기존과 다른 차이점
    - subflow를 임의 개수만큼 scheduling 가능
    - scheduling에 MPBond의 TCP splitting, helper측 buffering 고려
  - 다양한 app에서 사용될 수 있음 ( data chunk 사용, <u>가능한 빠르게 전송해야함</u> )
    - file 전송
    - video-on-demand
    - web browsing
    - cloud 동기화
  - 다른 유형의 traffic pattern ( )